# UI对齐优化说明

## 完成的优化

### 1. 添加了字符宽度计算函数

**位置**: [ui.py:24-59](ui.py#L24-L59)

创建了两个辅助函数来正确处理中英文混合文本的对齐:

- `get_display_width(text)`: 计算字符串的实际显示宽度
  - 中文字符算2个宽度
  - 英文、数字、符号算1个宽度

- `pad_string(text, total_width, align)`: 根据显示宽度对齐字符串
  - 支持左对齐(`'left'`)
  - 支持右对齐(`'right'`)
  - 支持居中对齐(`'center'`)

### 2. 优化了词条统计表格显示

**位置**: [ui.py:384-427](ui.py#L384-L427)

**表格布局**:
```
类型                  词条数       平均值                 总计
--------------------------------------------------------------
暴击                    4           9.3%                 37.2%
爆伤                    4          18.6%                 74.4%
生命/攻击百分比         4          10.1%                 40.4%
伤害加成                4          10.1%                 40.4%
生命固定值              4           510                   2040
攻击固定值              4            40                    160
```

**列宽设置**:
- 类型: 20个字符宽度(左对齐)
- 词条数: 10个字符宽度(居中)
- 平均值: 16个字符宽度(居中)
- 总计: 16个字符宽度(右对齐)

### 3. 优化了收益率分析表格显示

**位置**: [ui.py:467-516](ui.py#L467-L516)

**表格布局**:
```
词条类型                 平均值             伤害提升        收益率
------------------------------------------------------------------
爆伤                     18.6%               2655.05         6.64%
暴击                      9.3%               2572.34         6.43%
伤害加成                 10.1%               2015.56         5.04%
攻击百分比               10.1%               1820.27         4.55%
攻击固定值                 40                 360.45         0.90%
```

**列宽设置**:
- 词条类型: 20个字符宽度(左对齐)
- 平均值: 16个字符宽度(居中)
- 伤害提升: 16个字符宽度(右对齐)
- 收益率: 14个字符宽度(右对齐)

## 技术要点

### 为什么需要特殊的对齐处理?

Python的字符串格式化(`f"{text:<20}"`)默认按字符数对齐,但在等宽字体中:
- 中文字符占用2个字符宽度
- 英文字符占用1个字符宽度

如果直接使用Python默认对齐,中英文混合文本会错位。

### 解决方案

通过计算实际显示宽度并手动添加空格来对齐:

```python
# 错误方式(不考虑中文宽度)
f"{label:<15}"  # "生命/攻击百分比" 会导致列错位

# 正确方式(考虑显示宽度)
pad_string(label, 20)  # 自动计算中文字符宽度,正确对齐
```

## 测试

运行 `python ui.py` 查看优化后的对齐效果。在等宽字体环境下,所有表格列都会完美对齐。
